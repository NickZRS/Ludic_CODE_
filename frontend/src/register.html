<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/8c2d667180.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
  </head>
    <title>Ludic.CODE</title>
</head>
<body>
    <header>
      <div class="title-box">
        <h1 class="title">LUDIC.code</h1>
      </div>
      <div class="topnav" id="myTopnav">        
        <a href="/src/index.html">Home</a>
        <a href="/src/login.html">Login</a>
        <a class="active">Registrar</a>
        <a href="javascript:void(0);" class="icon"  onclick="navBar()">
        <i class="fa fa-bars"></i>
        </a>
      </div>
    </header>

    <main>
      <section>
        <h1 class="sbtitle">Seja bem-vindo!!! </h1>
        <h3 class="f-h3">Crie sua conta com e-mail, usuário e senha:</h3>

        <div>
            <label for="email-input" class="user-label" >E-mail</label>
            <input id="email-input" class="form-control" type="email" required>
        </div>

        <div>
            <label for="username-input" class="user-label" >Nome de usuário</label>
            <input id="username-input" class="form-control" type="text" required>
        </div>
        
        <div>
            <label for="password-input" class="password-label">Senha</label>
            <input id="password-input" class="form-control" type="password" required>
        </div>
        

      </section>
      <button type="button" id="btn-register" class="btn btn-outline-danger btn-lg">Criar Conta</button>
    </main>

    <footer>
      <section class="concepts">
        <h3 class="f-h3">Ludic.Code</h3>
        <a class="f-a" href="/src/portugol.html">Portugol</a>
        <p></p>
        <a class="f-a" href="/src/prog_log.html">Programação e o ensino de lógica</a>
      </section>
      <section class="about-us">
        <h3 class="f-h3">Sobre nós:</h3>
            <p class="f-p">Nicolas Oliveira Ribeiro Dos Santos</p>
            <a style="margin: 5%;" href="https://github.com/nickzrs"><img src="/images/github-logo.png"></a>
            <a href="https://www.linkedin.com/in/nicolas-oliveira-ribeiro-dos-santos-48475b232/"><img src="/images/linkedin.png"></a>
            <p class="f-p">Guilherme Kazuo Iamamoto</p>
            <a style="margin: 5%;" href="https://github.com/GuiKazuo1003"><img src="/images/github-logo.png"></a>
            <a href="https://www.linkedin.com/in/guilherme-kazuo-iamamoto-221843270/"><img src="/images/linkedin.png"></a>
      </section>
    </footer>


    <script>
      document.getElementById('btn-register').addEventListener('click', async function () {
      // Capturando os valores de entrada
      const username = document.getElementById('username-input').value;
      const password = document.getElementById('password-input').value;
      const email = document.getElementById('email-input').value;

      // Criando um objeto para enviar ao back-end
      const newUser = {
          Usuario: username,
          Password: password,
          Email: email
      };

      try {
          // Enviando a solicitação POST para o back-end
          const response = await fetch('https://localhost:7235/api/Login/register', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify(newUser),
          });

          if (response.ok) {
              const message = await response.text(); // Lê a resposta como texto
              alert(message); // Exibe a mensagem de sucesso
          } else {
              const errorText = await response.text();
              alert('Erro: ' + errorText); // Exibe a mensagem de erro
              console.error(errorText);
          }
      } catch (error) {
          console.error('Erro ao registrar usuário:', error);
          alert('Ocorreu um erro ao registrar. Tente novamente.');
      }
  });
      function navBar() {
          var x = document.getElementById("myTopnav");
          if (x.className === "topnav") {
              x.className += " responsive";
          } else {
              x.className = "topnav";
          }
      }
  </script>
</body>
</html>